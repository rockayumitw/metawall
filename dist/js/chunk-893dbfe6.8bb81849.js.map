{"version":3,"sources":["webpack:///./src/views/Page/Post.vue?da30","webpack:///./src/views/Page/Post.vue","webpack:///./src/views/Page/Post.vue?b73c"],"names":["_createElementVNode","class","for","_hoisted_1","_hoisted_5","$data","content","$event","id","rows","placeholder","type","image","_createElementBlock","src","alt","onClick","$options","data","posts","tags","user_id","methods","onFileChange","e","files","target","dataTransfer","length","this","createImage","file","allowImageTypes","maxSize","includes","$swal","size","reader","FileReader","vm","onload","console","log","result","readAsDataURL","removeImage","$store","dispatch","then","res","status","init","fire","position","icon","title","message","showConfirmButton","timer","$router","push","path","catch","err","response","__exports__","render"],"mappings":"2IAAA,W,wKCCIA,gCAEM,OAFDC,MAAM,0EAAyE,UAEpF,I,GACKA,MAAM,sD,GACFA,MAAM,U,GACFA,MAAM,e,QACPD,gCAEQ,SAFDE,IAAI,WAAWD,MAAM,mDAAkD,UAE9E,I,GAOCA,MAAM,4B,GASFA,MAAM,e,aAQVA,MAAM,uB,4GAhCnBE,EAGAH,gCAwCM,MAxCN,EAwCM,CAvCFA,gCAsCM,MAtCN,EAsCM,CArCFA,gCASM,MATN,EASM,CARFI,EAQE,4BALFJ,gCAIY,Y,qCAJOK,QAAMC,QAAOC,GAAEN,MAAM,WACxCO,GAAG,WACHC,KAAK,IACLC,YAAY,gBAHZ,4BAAmBL,QAAMC,aAM7BN,gCAgBM,MAhBN,EAgBM,CAPFA,gCAMM,MANN,EAMM,6BAFFA,gCAA+H,SAAxHC,MAAM,4CAA4CU,KAAK,OAAOH,GAAG,W,qCAAoBH,QAAMO,MAAKL,GAAEG,YAAY,WAArH,4BAA4FL,QAAMO,SACvFP,QAAMO,gCAAjBC,gCAAkD,O,MAAzBC,IAAKT,QAAMO,MAAOG,IAAI,IAA/C,sDAGRf,gCASM,MATN,EASM,CAHFA,gCAES,UAFDC,MAAM,mFAAoFe,QAAK,oBAAEC,2BAAQ,iBAnC7H,IA4CW,OACbC,OACE,MAAO,CACLC,MAAO,CACLb,QAAS,GACTM,MAAO,GACPD,KAAM,GACNS,KAAM,GACNC,QAAS,MAIfC,QAAS,CAEPC,aAAaC,GACX,MAAMC,EAAQD,EAAEE,OAAOD,OAASD,EAAEG,aAAaF,MAC1CA,EAAMG,QACXC,KAAKC,YAAYL,EAAM,KAGzBK,YAAYC,GAEV,MAAMC,EAAkB,CAAC,YAAa,YAAa,cAC7CC,EAAU,IAChB,IAAKD,EAAgBE,SAASH,EAAKpB,MAEjC,YADAkB,KAAKM,MAAM,QAAS,WAAY,SAGlC,GAAIJ,EAAKK,KAAOH,EAEd,YADAJ,KAAKM,MAAM,QAAS,OAAQ,SAK9B,MAAME,EAAS,IAAIC,WACbC,EAAKV,KACXQ,EAAOG,OAAUhB,IACfiB,QAAQC,IAAIlB,GACZe,EAAGpB,MAAMP,MAAQY,EAAEE,OAAOiB,QAE5BN,EAAOO,cAAcb,IAGvBc,cACEhB,KAAKV,MAAMP,MAAQ,IAGrB,eACEiB,KAAKV,MAAME,QAAU,2BACrBQ,KAAKV,MAAMR,KAAO,QAClBkB,KAAKV,MAAMC,KAAO,YACZS,KAAKiB,OAAOC,SAAS,eAAgB,IAAKlB,KAAKV,QAAS6B,KAAMC,IAC/C,MAAfA,EAAIC,QACNrB,KAAKsB,OACLtB,KAAKM,MAAMiB,KAAK,CACdC,SAAU,UACVC,KAAM,UACNC,MAAON,EAAIO,QACXC,mBAAmB,EACnBC,MAAO,MAET7B,KAAK8B,QAAQC,KAAK,CAAEC,KAAM,OAE1BhC,KAAKM,MAAMiB,KAAKH,EAAIO,QAAS,GAAI,WAElCM,MAAOC,IACoB,MAAxBA,EAAIC,SAASd,OACfrB,KAAKM,MAAMiB,KAAKW,EAAIC,SAAS9C,KAAKsC,QAAS,GAAI,SAE/C3B,KAAKM,MAAMiB,KAAKW,EAAIP,QAAS,GAAI,YAIvCL,OACEtB,KAAKV,MAAQ,CACXb,QAAS,GACTM,MAAO,GACPD,KAAM,GACNS,KAAM,GACNC,QAAS,O,iCCxHjB,MAAM4C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E","file":"js/chunk-893dbfe6.8bb81849.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Post.vue?vue&type=style&index=0&id=af1c3fac&lang=scss&scoped=true\"","<template>\n    <div class=\"border-2 border-black mb-3 text-center py-5 bg-white font-bold text-xl\">\n        張貼動態\n    </div>\n    <div class=\"flex rounded-md border-2 border-black p-8 bg-white\">\n        <div class=\"w-full\">\n            <div class=\"w-full mb-5\">\n                <label for=\"textarea\" class=\"form-label font-bold inline-block text-gray-700\">\n                    貼文內容\n                </label>\n                <textarea v-model=\"posts.content\" class=\"textarea\"\n                id=\"textarea\"\n                rows=\"5\"\n                placeholder=\"Your message\"\n                ></textarea>\n            </div>\n            <div class=\"flex justify-center mb-8\">\n              <!--圖片上傳使用-->\n                <!-- <div class=\"mb-5\">\n                    <label for=\"formFile\" class=\"form-label text-base py-1 px-8 rounded-md inline-block mb-2 text-white bg-black\">\n                        上傳圖片\n                    </label>\n                    <input class=\"form-control hidden\" type=\"file\" id=\"formFile\" @change=\"onFileChange\" accept=\"image/*\">\n                    <img v-if=\"posts.image\" :src=\"posts.image\" alt=\"\">\n                </div> -->\n                <div class=\"mb-5 w-full\">\n                    <!-- <label for=\"formFile\" class=\"form-label text-base py-1 px-8 rounded-md inline-block mb-2 text-white bg-black\">\n                        上傳圖片\n                    </label> -->\n                    <input class=\"form-control w-full border-2 border-black\" type=\"text\" id=\"formFile\" v-model=\"posts.image\" placeholder=\"請輸入圖片網址\">\n                    <img v-if=\"posts.image\" :src=\"posts.image\" alt=\"\">\n                </div>\n            </div>\n            <div class=\"mx-auto text-center\">\n                <!--判斷格式-->\n                <!-- <div class=\"text-center mb-4\">\n                    <p class=\"text-danger\">圖片檔案過大，僅限 1mb 以下檔案</p>\n                    <p class=\"text-danger\">圖片格式錯誤，僅限 JPG、PNG 圖片</p>\n                </div> -->\n                <button class=\"btn bg-gray-400 text-black font-bold border-2 border-black rounded-lg w-3/5 py-4\" @click=\"submit\">\n                    送出貼文\n                </button>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      posts: {\n        content: '',\n        image: '',\n        type: '',\n        tags: '',\n        user_id: '',\n      },\n    };\n  },\n  methods: {\n    // 上傳圖片\n    onFileChange(e) {\n      const files = e.target.files || e.dataTransfer.files;\n      if (!files.length) { return; }\n      this.createImage(files[0]);\n    },\n    // 判斷圖片限定格式、渲染圖片於指定位置\n    createImage(file) {\n      // 判斷格式、尺寸\n      const allowImageTypes = ['image/jpg', 'image/png', 'image/jpeg'];\n      const maxSize = 100000;\n      if (!allowImageTypes.includes(file.type)) {\n        this.$swal('error', '圖片檔案格式不符', 'error');\n        return;\n      }\n      if (file.size > maxSize) {\n        this.$swal('error', '超過尺寸', 'error');\n        return;\n      }\n\n      // 渲染圖片\n      const reader = new FileReader();\n      const vm = this;\n      reader.onload = (e) => {\n        console.log(e);\n        vm.posts.image = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    },\n    // 移除圖片\n    removeImage() {\n      this.posts.image = '';\n    },\n    // 文章送出\n    async submit() {\n      this.posts.user_id = '6273edda00b09a7c5d39abb4';\n      this.posts.type = 'group';\n      this.posts.tags = 'cat';\n      await this.$store.dispatch('posts/create', { ...this.posts }).then((res) => {\n        if (res.status === 200) {\n          this.init();\n          this.$swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: res.message,\n            showConfirmButton: false,\n            timer: 1000,\n          });\n          this.$router.push({ path: '/' });\n        } else {\n          this.$swal.fire(res.message, '', 'error');\n        }\n      }).catch((err) => {\n        if (err.response.status === 400) {\n          this.$swal.fire(err.response.data.message, '', 'error');\n        } else {\n          this.$swal.fire(err.message, '', 'error');\n        }\n      });\n    },\n    init() {\n      this.posts = {\n        content: '',\n        image: '',\n        type: '',\n        tags: '',\n        user_id: '',\n      };\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.textarea{\n  @apply w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border-solid border-black border-2 transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none;\n}\n</style>\n","import { render } from \"./Post.vue?vue&type=template&id=af1c3fac&scoped=true\"\nimport script from \"./Post.vue?vue&type=script&lang=js\"\nexport * from \"./Post.vue?vue&type=script&lang=js\"\n\nimport \"./Post.vue?vue&type=style&index=0&id=af1c3fac&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\【私人-GitHub】\\\\metawall\\\\frontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-af1c3fac\"]])\n\nexport default __exports__"],"sourceRoot":""}