{"version":3,"sources":["webpack:///./src/views/Page/Post.vue?0803","webpack:///./src/views/Page/Post.vue","webpack:///./src/views/Page/Post.vue?b73c"],"names":["_createElementVNode","class","for","_hoisted_1","_hoisted_5","$data","content","$event","id","rows","placeholder","_hoisted_8","type","onChange","$options","accept","image","_createElementBlock","src","alt","onClick","data","posts","tags","user_id","methods","onFileChange","e","files","target","dataTransfer","length","this","createImage","file","allowImageTypes","maxSize","includes","$swal","size","reader","FileReader","vm","onload","console","log","result","readAsDataURL","removeImage","$store","dispatch","then","res","init","fire","position","icon","title","message","showConfirmButton","timer","$router","push","path","catch","err","__exports__","render"],"mappings":"kHAAA,W,wKCCIA,gCAEM,OAFDC,MAAM,0EAAyE,UAEpF,I,GACKA,MAAM,sD,GACFA,MAAM,U,GACFA,MAAM,e,QACPD,gCAEQ,SAFDE,IAAI,WAAWD,MAAM,mDAAkD,UAE9E,I,GAOCA,MAAM,4B,GAEFA,MAAM,Q,QACPD,gCAEQ,SAFDE,IAAI,WAAWD,MAAM,mFAAkF,UAE9G,I,aAYHA,MAAM,uB,4GAhCnBE,EAGAH,gCAwCM,MAxCN,EAwCM,CAvCFA,gCAsCM,MAtCN,EAsCM,CArCFA,gCASM,MATN,EASM,CARFI,EAQE,4BALFJ,gCAIY,Y,qCAJOK,QAAMC,QAAOC,GAAEN,MAAM,WACxCO,GAAG,WACHC,KAAK,IACLC,YAAY,gBAHZ,4BAAmBL,QAAMC,aAM7BN,gCAgBM,MAhBN,EAgBM,CAdFA,gCAMM,MANN,EAMM,CALFW,EAGAX,gCAAqG,SAA9FC,MAAM,sBAAsBW,KAAK,OAAOJ,GAAG,WAAYK,SAAM,oBAAEC,sCAAcC,OAAO,WAA3F,SACWV,QAAMW,gCAAjBC,gCAAkD,O,MAAzBC,IAAKb,QAAMW,MAAOG,IAAI,IAA/C,sDAURnB,gCASM,MATN,EASM,CAHFA,gCAES,UAFDC,MAAM,mFAAoFmB,QAAK,oBAAEN,2BAAQ,iBAnC7H,IA4CW,OACbO,OACE,MAAO,CACLC,MAAO,CACLhB,QAAS,GACTU,MAAO,GACPJ,KAAM,GACNW,KAAM,GACNC,QAAS,MAIfC,QAAS,CAEPC,aAAaC,GACX,MAAMC,EAAQD,EAAEE,OAAOD,OAASD,EAAEG,aAAaF,MAC1CA,EAAMG,QACXC,KAAKC,YAAYL,EAAM,KAGzBK,YAAYC,GAEV,MAAMC,EAAkB,CAAC,YAAa,YAAa,cAC7CC,EAAU,IAChB,IAAKD,EAAgBE,SAASH,EAAKtB,MAEjC,YADAoB,KAAKM,MAAM,QAAS,WAAY,SAGlC,GAAIJ,EAAKK,KAAOH,EAEd,YADAJ,KAAKM,MAAM,QAAS,OAAQ,SAK9B,MAAME,EAAS,IAAIC,WACbC,EAAKV,KACXQ,EAAOG,OAAUhB,IACfiB,QAAQC,IAAIlB,GACZe,EAAGpB,MAAMN,MAAQW,EAAEE,OAAOiB,QAE5BN,EAAOO,cAAcb,IAGvBc,cACEhB,KAAKV,MAAMN,MAAQ,IAGrB,eACEgB,KAAKV,MAAME,QAAU,2BACrBQ,KAAKV,MAAMV,KAAO,QAClBoB,KAAKV,MAAMC,KAAO,MAClB,UACQS,KAAKiB,OAAOC,SAAS,eAAgB,IAAKlB,KAAKV,QAAS6B,KAAMC,IAClEpB,KAAKqB,OACLrB,KAAKM,MAAMgB,KAAK,CACdC,SAAU,UACVC,KAAM,UACNC,MAAOL,EAAIM,QACXC,mBAAmB,EACnBC,MAAO,MAET5B,KAAK6B,QAAQC,KAAK,CAAEC,KAAM,QACzBC,MAAOC,IACRrB,QAAQC,IAAIoB,GACZjC,KAAKM,MAAMgB,KAAKW,EAAIP,QAAS,GAAI,WAEnC,MAAOO,GACPrB,QAAQC,IAAIoB,GACZjC,KAAKM,MAAMgB,KAAKW,EAAIP,QAAS,GAAI,WAGrCL,OACErB,KAAKV,MAAQ,CACXhB,QAAS,GACTU,MAAO,GACPJ,KAAM,GACNW,KAAM,GACNC,QAAS,O,iCCtHjB,MAAM0C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB","file":"js/chunk-cd160e38.0edd8a49.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Post.vue?vue&type=style&index=0&id=74500f74&lang=scss&scoped=true\"","<template>\n    <div class=\"border-2 border-black mb-3 text-center py-5 bg-white font-bold text-xl\">\n        張貼動態\n    </div>\n    <div class=\"flex rounded-md border-2 border-black p-8 bg-white\">\n        <div class=\"w-full\">\n            <div class=\"w-full mb-5\">\n                <label for=\"textarea\" class=\"form-label font-bold inline-block text-gray-700\">\n                    貼文內容\n                </label>\n                <textarea v-model=\"posts.content\" class=\"textarea\"\n                id=\"textarea\"\n                rows=\"5\"\n                placeholder=\"Your message\"\n                ></textarea>\n            </div>\n            <div class=\"flex justify-center mb-8\">\n              <!--圖片上傳使用-->\n                <div class=\"mb-5\">\n                    <label for=\"formFile\" class=\"form-label text-base py-1 px-8 rounded-md inline-block mb-2 text-white bg-black\">\n                        上傳圖片\n                    </label>\n                    <input class=\"form-control hidden\" type=\"file\" id=\"formFile\" @change=\"onFileChange\" accept=\"image/*\">\n                    <img v-if=\"posts.image\" :src=\"posts.image\" alt=\"\">\n                </div>\n                <!-- <div class=\"mb-5\">\n                    <label for=\"formFile\" class=\"form-label text-base py-1 px-8 rounded-md inline-block mb-2 text-white bg-black\">\n                        上傳圖片\n                    </label>\n                    <input class=\"form-control\" type=\"text\" id=\"formFile\" v-model=\"posts.image\">\n                    <img v-if=\"posts.image\" :src=\"posts.image\" alt=\"\">\n                </div> -->\n            </div>\n            <div class=\"mx-auto text-center\">\n                <!--判斷格式-->\n                <!-- <div class=\"text-center mb-4\">\n                    <p class=\"text-danger\">圖片檔案過大，僅限 1mb 以下檔案</p>\n                    <p class=\"text-danger\">圖片格式錯誤，僅限 JPG、PNG 圖片</p>\n                </div> -->\n                <button class=\"btn bg-gray-400 text-black font-bold border-2 border-black rounded-lg w-3/5 py-4\" @click=\"submit\">\n                    送出貼文\n                </button>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      posts: {\n        content: '',\n        image: '',\n        type: '',\n        tags: '',\n        user_id: '',\n      },\n    };\n  },\n  methods: {\n    // 上傳圖片\n    onFileChange(e) {\n      const files = e.target.files || e.dataTransfer.files;\n      if (!files.length) { return; }\n      this.createImage(files[0]);\n    },\n    // 判斷圖片限定格式、渲染圖片於指定位置\n    createImage(file) {\n      // 判斷格式、尺寸\n      const allowImageTypes = ['image/jpg', 'image/png', 'image/jpeg'];\n      const maxSize = 100000;\n      if (!allowImageTypes.includes(file.type)) {\n        this.$swal('error', '圖片檔案格式不符', 'error');\n        return;\n      }\n      if (file.size > maxSize) {\n        this.$swal('error', '超過尺寸', 'error');\n        return;\n      }\n\n      // 渲染圖片\n      const reader = new FileReader();\n      const vm = this;\n      reader.onload = (e) => {\n        console.log(e);\n        vm.posts.image = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    },\n    // 移除圖片\n    removeImage() {\n      this.posts.image = '';\n    },\n    // 文章送出\n    async submit() {\n      this.posts.user_id = '6273edda00b09a7c5d39abb4';\n      this.posts.type = 'group';\n      this.posts.tags = 'cat';\n      try {\n        await this.$store.dispatch('posts/create', { ...this.posts }).then((res) => {\n          this.init();\n          this.$swal.fire({\n            position: 'top-end',\n            icon: 'success',\n            title: res.message,\n            showConfirmButton: false,\n            timer: 1000,\n          });\n          this.$router.push({ path: '/' });\n        }).catch((err) => {\n          console.log(err);\n          this.$swal.fire(err.message, '', 'error');\n        });\n      } catch (err) {\n        console.log(err);\n        this.$swal.fire(err.message, '', 'error');\n      }\n    },\n    init() {\n      this.posts = {\n        content: '',\n        image: '',\n        type: '',\n        tags: '',\n        user_id: '',\n      };\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.textarea{\n  @apply w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border-solid border-black border-2 transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none;\n}\n</style>\n","import { render } from \"./Post.vue?vue&type=template&id=74500f74&scoped=true\"\nimport script from \"./Post.vue?vue&type=script&lang=js\"\nexport * from \"./Post.vue?vue&type=script&lang=js\"\n\nimport \"./Post.vue?vue&type=style&index=0&id=74500f74&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\【私人-GitHub】\\\\metawall\\\\frontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-74500f74\"]])\n\nexport default __exports__"],"sourceRoot":""}