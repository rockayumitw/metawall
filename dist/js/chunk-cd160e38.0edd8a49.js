(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd160e38"],{"10df":function(e,t,s){"use strict";s("d3e8")},"37ae":function(e,t,s){"use strict";s.r(t);s("ddb0");var o=s("7a23");const a=e=>(Object(o["pushScopeId"])("data-v-74500f74"),e=e(),Object(o["popScopeId"])(),e),r=a(()=>Object(o["createElementVNode"])("div",{class:"border-2 border-black mb-3 text-center py-5 bg-white font-bold text-xl"}," 張貼動態 ",-1)),c={class:"flex rounded-md border-2 border-black p-8 bg-white"},l={class:"w-full"},n={class:"w-full mb-5"},i=a(()=>Object(o["createElementVNode"])("label",{for:"textarea",class:"form-label font-bold inline-block text-gray-700"}," 貼文內容 ",-1)),d={class:"flex justify-center mb-8"},b={class:"mb-5"},m=a(()=>Object(o["createElementVNode"])("label",{for:"formFile",class:"form-label text-base py-1 px-8 rounded-md inline-block mb-2 text-white bg-black"}," 上傳圖片 ",-1)),p=["src"],g={class:"mx-auto text-center"};function u(e,t,s,a,u,h){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[r,Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",n,[i,Object(o["withDirectives"])(Object(o["createElementVNode"])("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.posts.content=e),class:"textarea",id:"textarea",rows:"5",placeholder:"Your message"},null,512),[[o["vModelText"],u.posts.content]])]),Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",b,[m,Object(o["createElementVNode"])("input",{class:"form-control hidden",type:"file",id:"formFile",onChange:t[1]||(t[1]=(...e)=>h.onFileChange&&h.onFileChange(...e)),accept:"image/*"},null,32),u.posts.image?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,src:u.posts.image,alt:""},null,8,p)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("button",{class:"btn bg-gray-400 text-black font-bold border-2 border-black rounded-lg w-3/5 py-4",onClick:t[2]||(t[2]=(...e)=>h.submit&&h.submit(...e))}," 送出貼文 ")])])])],64)}var h={data(){return{posts:{content:"",image:"",type:"",tags:"",user_id:""}}},methods:{onFileChange(e){const t=e.target.files||e.dataTransfer.files;t.length&&this.createImage(t[0])},createImage(e){const t=["image/jpg","image/png","image/jpeg"],s=1e5;if(!t.includes(e.type))return void this.$swal("error","圖片檔案格式不符","error");if(e.size>s)return void this.$swal("error","超過尺寸","error");const o=new FileReader,a=this;o.onload=e=>{console.log(e),a.posts.image=e.target.result},o.readAsDataURL(e)},removeImage(){this.posts.image=""},async submit(){this.posts.user_id="6273edda00b09a7c5d39abb4",this.posts.type="group",this.posts.tags="cat";try{await this.$store.dispatch("posts/create",{...this.posts}).then(e=>{this.init(),this.$swal.fire({position:"top-end",icon:"success",title:e.message,showConfirmButton:!1,timer:1e3}),this.$router.push({path:"/"})}).catch(e=>{console.log(e),this.$swal.fire(e.message,"","error")})}catch(e){console.log(e),this.$swal.fire(e.message,"","error")}},init(){this.posts={content:"",image:"",type:"",tags:"",user_id:""}}}},f=(s("10df"),s("d959")),j=s.n(f);const w=j()(h,[["render",u],["__scopeId","data-v-74500f74"]]);t["default"]=w},d3e8:function(e,t,s){}}]);
//# sourceMappingURL=chunk-cd160e38.0edd8a49.js.map